#!/bin/bash

if [ -z "$CHARJ_HOME" ]; then
    SRC_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
    export CHARJ_HOME=$SRC_DIR/../
fi

# if the binary doesn't exist
if [ ! -f $CHARJ_HOME/bin/charj.jar ]; then
    # save the current directory
    CUR_DIR="$(pwd)"
    # hop over to CHARJ_HOME
    cd $CHARJ_HOME
    # build charj
    make
    # and go back
    cd $CUR_DIR
fi

java -jar $CHARJ_HOME/bin/charj.jar $@
